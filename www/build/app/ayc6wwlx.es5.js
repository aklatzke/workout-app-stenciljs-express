/*! Built with http://stenciljs.com */
var __generator=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};App.loadBundle("ayc6wwlx",["exports","./chunk-adebd19b.js","./chunk-807bbfbc.js"],function(e,t,n){var r=window.App.h,o=function(){function e(){}return e.prototype.componentWillLoad=function(){var e=this;this.interval=setInterval(function(){var n=t.moment.duration(t.moment().utc().diff(t.moment(e.activeWorkout.date)));e.timer=t.moment.utc(n.asMilliseconds()).format("HH:mm:ss")},1e3)},e.prototype.componentWillUnload=function(){clearInterval(this.interval)},e.prototype.render=function(){return r("stencil-route-link",{url:"/workout/active"},r("div",{class:"active-workout-bar"},r("div",{class:"row"},r("div",{class:"col-7 text-center"},"Active Routine: ",r("strong",null,this.activeWorkout.name)),r("div",{class:"col-5 text-center timer"},this.timer))))},Object.defineProperty(e,"is",{get:function(){return"active-workout-bar"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{activeWorkout:{type:"Any",attr:"active-workout"},timer:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".active-workout-bar{position:fixed;bottom:0;left:0;right:0;background-color:#fff;padding-top:15px;padding-bottom:15px;font-size:14px;border-top:2px solid #000;color:#444}.timer{color:#51cbce;font-weight:700}"},enumerable:!0,configurable:!0}),e}();window.firebase||(window.firebase={},window.firebase.auth=function(){return{onAuthStateChanged:function(){},signInWithRedirect:function(){}}},window.firebase.auth.GoogleAuthProvider=function(){});var i=function(){function e(){var e=this;this.componentDidLoad=function(){window.firebase.auth().onAuthStateChanged(function(t){if(t){var n=t.email,r=t.displayName,o=t.uid;e.authenticationResponse.emit({email:n,displayName:r,uid:o})}else window.firebase.auth().signInWithRedirect(new window.firebase.auth.GoogleAuthProvider)})}}return e.prototype.render=function(){return null},Object.defineProperty(e,"is",{get:function(){return"app-authentication"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"authenticationResponse",method:"authenticationResponse",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".app-home{padding:10px}button{background:#5851ff;color:#fff;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;-webkit-box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);outline:0;letter-spacing:.04em;-webkit-transition:all .15s ease;transition:all .15s ease;cursor:pointer}button:hover{-webkit-box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);-webkit-transform:translateY(1px);transform:translateY(1px)}"},enumerable:!0,configurable:!0}),e}(),a=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}u((r=r.apply(e,t||[])).next())})},c=function(){function e(){this.isAuthenticated=!1,this.hasActiveWorkout=!1}return e.prototype.handleAuthentication=function(e){return a(this,void 0,void 0,function(){var t,r,o;return __generator(this,function(i){switch(i.label){case 0:return e.detail?(t=Object.assign({},e.detail),this.isAuthenticated=!0,[4,n.post("/user/findOrCreate",t)]):[3,3];case 1:return r=i.sent(),this.activeUser=r,o=this,[4,n.get("/user/"+this.activeUser._id+"/workout/active")];case 2:o.activeWorkout=i.sent(),this.activeWorkout&&(this.hasActiveWorkout=!0),i.label=3;case 3:return[2]}})})},e.prototype.setContextMenu=function(e){this.contextMenu=e.detail},e.prototype.maybeRenderActiveBar=function(){if(this.hasActiveWorkout)return r("active-workout-bar",{activeWorkout:this.activeWorkout})},e.prototype.changeBack=function(e){return a(this,void 0,void 0,function(){return __generator(this,function(t){return e.detail?this.backUrl=e.detail:this.backUrl="",[2]})})},e.prototype.activeWorkoutChange=function(){return a(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,n.get("/user/"+this.activeUser._id+"/workout/active")];case 1:return e.activeWorkout=t.sent(),this.activeWorkout?this.hasActiveWorkout=!0:this.hasActiveWorkout=!1,[2]}})})},e.prototype.renderApp=function(){return r("main",null,r("stencil-router",null,r("stencil-route-switch",{scrollTopOffset:0},r("stencil-route",{url:"/",component:"workouts-dashboard",exact:!0,componentProps:{uid:this.activeUser._id,hasActiveWorkout:this.hasActiveWorkout}}),r("stencil-route",{url:"/profile/:name",component:"app-profile"}),r("stencil-route",{url:"/exercise/:eid",component:"exercise-specific",exact:!0,componentProps:{uid:this.activeUser._id}}),r("stencil-route",{url:"/workout/new",component:"new-workout",exact:!0,componentProps:{uid:this.activeUser._id}}),r("stencil-route",{url:"/workout/active",component:"active-workout",exact:!0,componentProps:{uid:this.activeUser._id}}),this.hasActiveWorkout?r("stencil-route",{url:"/workout/active/add",component:"add-exercise",exact:!0,componentProps:{uid:this.activeUser._id,activeWorkout:this.activeWorkout._id}}):null)))},e.prototype.maybeRenderBack=function(){if(this.backUrl)return r("stencil-route-link",{url:this.backUrl},r("button",{class:"btn btn-outline-default btn-sm"},r("small",null,r("i",{class:"fa fa-chevron-left"}))," Back"))},e.prototype.maybeRenderLogin=function(){return this.isAuthenticated?this.renderApp():r("app-authentication",null)},e.prototype.render=function(){return r("div",null,r("header",{class:"navbar"},r("div",{class:"col-4 header-right text-center"},this.maybeRenderBack()),r("div",{class:"col-4 text-center"},r("h1",{class:"navbar-brand text-center"},"Tracker")),r("div",{class:"col-4 header-right text-center"},r("span",null,this.contextMenu))),this.maybeRenderLogin(),this.maybeRenderActiveBar())},Object.defineProperty(e,"is",{get:function(){return"app-root"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{activeUser:{state:!0},activeWorkout:{state:!0},backUrl:{state:!0},contextMenu:{state:!0},hasActiveWorkout:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"listeners",{get:function(){return[{name:"authenticationResponse",method:"handleAuthentication"},{name:"setContextMenu",method:"setContextMenu"},{name:"changeBack",method:"changeBack"},{name:"activeWorkoutChange",method:"activeWorkoutChange"}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"header{background:#5851ff;color:#fff;height:56px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26)}h1{font-size:2rem;font-weight:500;color:#fff;padding:0 12px}.header-right span{color:#333;font-size:12px}.navbar h1.navbar-brand{font-size:14px}"},enumerable:!0,configurable:!0}),e}();e.ActiveWorkoutBar=o,e.AppAuthentication=i,e.AppRoot=c,Object.defineProperty(e,"__esModule",{value:!0})});